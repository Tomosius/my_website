@import "tailwindcss";
@plugin '@tailwindcss/forms';
@plugin '@tailwindcss/typography';

@supports (resize: both) {
  textarea {
    resize: vertical;
  }
}

@plugin "tailwindcss-palette-generator" {
  bgtop: #2c2c54;
  bgmid: #1f1f3d;
  bgbottom: #1a1a33;
  glowtop: rgba(139, 92, 246, 0.18);
  glowside: rgba(79, 70, 229, 0.12);
  accent: #8b5cf6;
  accentsoft: #a78bfa;
}

/* ---- Base (ok to nest @supports inside @layer) ---- */
@layer base {
  :root {
    --bg-top: #2c2c54;
    --bg-mid: #1f1f3d;
    --bg-bottom: #1a1a33;
    --glow-top: rgba(139, 92, 246, 0.18);
    --glow-side: rgba(79, 70, 229, 0.12);
  }

  html,
  body {
    min-height: 100%;
  }

  /* Fallback for browsers without color-mix/oklch */
  body {
    background: linear-gradient(
      to bottom,
      var(--bg-top) 0%,
      #242447 50%,
      var(--bg-bottom) 100%
    );
    color: white;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  @supports (background: color-mix(in oklch, white, black)) {
    body {
      background-image:
        radial-gradient(
          1200px 700px at 50% 0%,
          color-mix(in oklch, var(--glow-top) 35%, transparent 65%),
          transparent 78%
        ),
        radial-gradient(
          640px 640px at 0% 45%,
          color-mix(in oklch, var(--glow-side) 30%, transparent 70%),
          transparent 72%
        ),
        radial-gradient(
          640px 640px at 100% 45%,
          color-mix(in oklch, var(--glow-side) 30%, transparent 70%),
          transparent 72%
        ),
        linear-gradient(
          to bottom,
          var(--bg-top) 0%,
          color-mix(in oklch, var(--bg-top) 70%, var(--bg-mid) 30%) 50%,
          var(--bg-bottom) 100%
        );
      background-repeat: no-repeat;
      background-position: center;
      background-size: cover;
      background-attachment: fixed;
    }
  }

  /* iOS Safari: avoid jank from fixed backgrounds */
  @media (max-width: 767px) {
    body {
      background-attachment: scroll;
    }
  }
}

/* ---- Custom utility MUST be top-level in v4 ---- */
@utility bg-app {
  background-image:
    radial-gradient(
      1200px 700px at 50% 0%,
      color-mix(in oklch, var(--glow-top) 35%, transparent 65%),
      transparent 78%
    ),
    radial-gradient(
      640px 640px at 0% 45%,
      color-mix(in oklch, var(--glow-side) 30%, transparent 70%),
      transparent 72%
    ),
    radial-gradient(
      640px 640px at 100% 45%,
      color-mix(in oklch, var(--glow-side) 30%, transparent 70%),
      transparent 72%
    ),
    linear-gradient(
      to bottom,
      var(--bg-top) 0%,
      color-mix(in oklch, var(--bg-top) 70%, var(--bg-mid) 30%) 50%,
      var(--bg-bottom) 100%
    );
  background-repeat: no-repeat;
  background-position: center;
  background-size: cover;
}
